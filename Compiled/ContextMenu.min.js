class ContextMenu{#e;#t=null;#n=!1;#i=!0;#s=null;#o=[];#u;constructor(e,t){if(!(e&&e instanceof HTMLElement))throw new Error("Invalid container element");this.#e=e,this.#u=t,this.handleOutsideClick=this.handleOutsideClick.bind(this),document.addEventListener("click",this.handleOutsideClick),this.#l()}#l(){if(document.getElementById("context-menu-styles"))return;const e=document.createElement("style");e.id="context-menu-styles",e.textContent=".context-menu{display:inline-block;position:fixed;top:0;left:0;min-width:270px;font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;color:#000;background:#f5f5f5;font-size:9pt;border:1px solid #333;box-shadow:4px 4px 3px -1px rgba(0,0,0,.5);padding:3px 0;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.context-menu .menu-item{padding:4px 19px;cursor:default;color:inherit}.context-menu .menu-item:hover{background:#e3e3e3!important}.context-menu .item:hover .menu-hotkey{color:#000!important}.context-menu .disabled:hover .menu-hotkey,.context-menu .menu-item-disabled{color:#878b90!important}.context-menu .menu-item-disabled:hover{background:inherit!important}.context-menu .menu-separator{margin:4px 0;height:0;padding:0;border-top:1px solid #b3b3b3}.context-menu .menu-hotkey{color:#878b90;float:right}",document.head.appendChild(e)}handleOutsideClick(e){this.#n&&this.#t&&e.target!==this.#t&&!this.#t.contains(e.target)&&!e.target.closest(".context-menu")&&this.#d()}#h(e,t){const n=document.createElement("div");return n.classList.add("context-menu"),n.style.left=`${e}px`,n.style.top=`${t}px`,this.#u.forEach((e=>{n.appendChild(this.#m(e))})),this.#t=n,n}#m(e){if(null===e){const e=document.createElement("div");return e.classList.add("menu-separator"),e}const t=document.createElement("div");t.classList.add("menu-item");const n=document.createElement("span");n.classList.add("menu-label"),n.textContent=e.text?.toString()||"",t.appendChild(n),e.disabled?t.classList.add("menu-item-disabled"):t.classList.add("menu-item-active");const i=document.createElement("span");if(i.classList.add("menu-hotkey"),i.textContent=e.hotkey?.toString()||"",t.appendChild(i),this.#a(e)){const n=e.subitems||e.submenu,i=n instanceof ContextMenuHandler?n:new ContextMenuHandler(this.#e,n);i.#i=!1,i.#s=this,this.#o.push(i),t.classList.add("has-submenu");const s=n=>{if(e.disabled)return;this.#r();const s=this.#t.offsetLeft+this.#t.clientWidth+t.offsetLeft,o=this.#t.offsetTop+t.offsetTop;i.#n?i.#c():i.#p(s,o)};t.addEventListener("click",s),t.addEventListener("mousemove",s)}else t.addEventListener("click",(s=>{if(this.#r(),!t.classList.contains("menu-item-disabled"))if("function"==typeof e.onclick){const s={handled:!1,item:t,label:n,hotkey:i,items:this.#u,data:e};e.onclick(s),s.handled||this.#c()}else this.#c()})),t.addEventListener("mousemove",(()=>{this.#r()}));return t}#a(e){return e.subitems&&Array.isArray(e.subitems)&&e.subitems.length>0||e.submenu&&e.submenu instanceof ContextMenuHandler}#d(){!this.#i||this.#s?this.#s.#c():this.#n&&(this.#r(),this.#n=!1,this.#e.removeChild(this.#t),this.#s&&this.#s.#n&&this.#s.#c())}#c(){this.#t&&this.#n&&(this.#n=!1,this.#r(),this.#e.removeChild(this.#t),this.#s&&this.#s.#n&&this.#s.#c()),this.#b()}#r(){this.#o.forEach((e=>{e.#n&&(e.#n=!1,e.#e.removeChild(e.#t)),e.#r()}))}#p(e,t){this.#h(e,t),this.#e.appendChild(this.#t),setTimeout((()=>{this.#n=!0}),0)}#b(){this.#t=null,document.removeEventListener("click",this.handleOutsideClick)}display(e,t){return document.querySelectorAll(".context-menu").forEach((e=>e.remove())),this.#p(e,t),this}dismiss(){return this.#c(),this}getMenuState(){return{container:this.#e,domElement:this.#t,isVisible:this.#n,isRootMenu:this.#i,parentMenu:this.#s,childMenus:this.#o,menuItems:this.#u}}}
//# sourceMappingURL=ContextMenu.js.map