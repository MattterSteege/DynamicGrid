!function(r,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.DynamicGrid=e():r.DynamicGrid=e()}(this,(()=>(()=>{"use strict";var r={};function e(r){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},e(r)}function t(r,e){return function(r){if(Array.isArray(r))return r}(r)||function(r,e){var t=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null!=t){var n,o,i,a,u=[],f=!0,l=!1;try{if(i=(t=t.call(r)).next,0===e){if(Object(t)!==t)return;f=!1}else for(;!(f=(n=i.call(t)).done)&&(u.push(n.value),u.length!==e);f=!0);}catch(r){l=!0,o=r}finally{try{if(!f&&null!=t.return&&(a=t.return(),Object(a)!==a))return}finally{if(l)throw o}}return u}}(r,e)||function(r,e){if(r){if("string"==typeof r)return n(r,e);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?n(r,e):void 0}}(r,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,n=Array(e);t<e;t++)n[t]=r[t];return n}function o(r,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,i(n.key),n)}}function i(r){var t=function(r){if("object"!=e(r)||!r)return r;var t=r[Symbol.toPrimitive];if(void 0!==t){var n=t.call(r,"string");if("object"!=e(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(r)}(r);return"symbol"==e(t)?t:t+""}var a,u,f,l=function(){function r(e){!function(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}(this,r),this.engine=e}return e=r,(n=[{key:"parseQuery",value:function(r){var e=this;return r.split(/\s+and\s+/i).map((function(r){return e.parseSubQuery(r.trim())})).filter((function(r){return r.queryType}))}},{key:"parseSubQuery",value:function(e){for(var n=0,o=Object.entries(r.QUERIES);n<o.length;n++){var i=t(o[n],2),a=i[0],u=i[1].exec(e);if(u)return this.parseMatch(u,a)||{}}}},{key:"parseMatch",value:function(r,e){if("SELECT"===e){var n=t(r,4),o=(n[0],n[1]),i=n[2],a=n[3],u=this.engine.headers[o],f=this.engine.getPlugin(u);if(!f)throw new Error("No plugin found for header ("+u+") for key ("+o+")");var l=o,c=f.getOperator(i);if(!c)throw new Error(this.formatOperatorError(i,l,f));return f.validate(a)&&(a=f.getJSQLFormat(a)),{type:u,field:l,operator:c.name,value:a,queryType:"SELECT"}}if("SORT"===e){var y=t(r,3),s=(y[0],y[1]),p=y[2],b=this.engine.headers[s];if(!this.engine.getPlugin(b))throw new Error("No plugin found for header ("+b+") for key ("+s+")");return{type:b,field:s,operator:"sort",value:p,queryType:"SORT"}}if("RANGE"===e){var m=t(r,3);return m[0],{type:"range",field:"range",operator:"range",lower:m[1],upper:m[2],queryType:"RANGE"}}}},{key:"formatOperatorError",value:function(r,e,t){return["\n\nInvalid operator:    "+r,"       For query:    "+e,"     options are:    "+t.getOperatorSymbols().join(", "),"\n"].join("\n")}}])&&o(e.prototype,n),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,n}();return a=l,f={RANGE:/range\s+(-?\d+)-?(-?\d+)?/,SORT:/sort\s+([A-Za-z]+)\s+(asc|desc)/,SELECT:/([A-Za-z]+)\s+(\S+)\s+(.+)/},(u=i(u="QUERIES"))in a?Object.defineProperty(a,u,{value:f,enumerable:!0,configurable:!0,writable:!0}):a[u]=f,r.default})()));