<!DOCTYPE html>
<html lang="en" xmlns="">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
  <style>
    .table {
      display: grid;
      grid-template-columns: var(--column-width-1) var(--column-width-2) var(--column-width-3);
      border: 1px solid #ddd;
    }

    .row {
      display: contents;
    }

    .cell {
      padding: 8px;
      border-bottom: 1px solid #ddd;
      border-right: 1px solid #ddd;
    }

    .cell:last-child {
      border-right: none;
    }

    .header {
      background-color: #f4f4f4;
      font-weight: bold;
    }

    /* Resizing handles */
    .resizer {
      width: 5px;
      cursor: col-resize;
      position: absolute;
      right: -2.5px;
      top: 0;
      bottom: 0;
      background: transparent;
    }
    .resizer:hover {
      background: #aaa;
    }

    .cell {
      position: relative;
    }

  </style>
</head>
<body>
<div class="table" style="--column-width-1: 30%; --column-width-2: 50%; --column-width-3: 20%;">
  <div class="row header">
    <div class="cell">Header 1</div>
    <div class="cell">Header 2</div>
    <div class="cell">Header 3</div>
  </div>
  <div class="row">
    <div class="cell">Row 1, Col 1</div>
    <div class="cell">Row 1, Col 2</div>
    <div class="cell">Row 1, Col 3</div>
  </div>
  <div class="row">
    <div class="cell">Row 2, Col 1</div>
    <div class="cell">Row 2, Col 2</div>
    <div class="cell">Row 2, Col 3</div>
  </div>
</div>
<script>
  let rows = 3;
  let rowWidths = [];
  for (let i = 0; i < rows; i++) {
    rowWidths.push(100 / rows);
  }

  const table = document.querySelector('.table');
  rowWidths.forEach((width, index) => {
    table.style.setProperty(`--column-width-${index + 1}`, `${width}%`);
  });

  table.querySelectorAll('.header .cell').forEach((cell, index) => {
    const resizer = document.createElement('div');
    resizer.className = 'resizer';
    resizer.setAttribute('data-index', index);
    cell.appendChild(resizer);

    let startX, startWidth, nextColumnStartWidth;

    resizer.addEventListener('mousedown', (e) => {
      e.preventDefault(); // Prevent text selection while resizing
      startX = e.pageX;

      const table = document.querySelector('.table');
      const tableWidth = table.offsetWidth;

      // Get current column width
      startWidth = parseFloat(
              getComputedStyle(table).getPropertyValue(`--column-width-${index + 1}`)
      );

      // Get next column width (if it exists)
      if (index < rows - 1) {
        nextColumnStartWidth = parseFloat(
                getComputedStyle(table).getPropertyValue(`--column-width-${index + 2}`)
        );
      }

      const onMouseMove = (e) => {
        const diffX = e.pageX - startX; // Difference in mouse position
        const widthChange = (diffX / tableWidth) * 100;

        // Calculate new widths
        const newWidth = startWidth + widthChange;
        const newNextWidth = nextColumnStartWidth - widthChange;

        // Ensure both columns stay within reasonable bounds (minimum 10% width)
        if (newWidth >= 10 && newNextWidth >= 10) {
          // Update current column width
          rowWidths[index] = newWidth;
          table.style.setProperty(`--column-width-${index + 1}`, `${rowWidths[index]}%`);

          // Update next column width if it exists
          if (index < rows - 1) {
            rowWidths[index + 1] = newNextWidth;
            table.style.setProperty(`--column-width-${index + 2}`, `${rowWidths[index + 1]}%`);
          }
        }
      };

      const onMouseUp = () => {
        document.removeEventListener('mousemove', onMouseMove);
        document.removeEventListener('mouseup', onMouseUp);
      };

      document.addEventListener('mousemove', onMouseMove);
      document.addEventListener('mouseup', onMouseUp);
    });
  });


</script>
</body>
</html>